<!DOCTYPE html>
<html>
	<head>
		<script src="https://cdn.socket.io/3.1.1/socket.io.min.js"></script>
		<script>
			const room = prompt("What room?")
			const socket = io();
			socket.once("disconnect", (reason) => {
				if (reason === "io server disconnect") {
					alert("Server closed connection")
				}
			})
			socket.emit("initInstance", {
				username: "test",
				room: room
			})
			socket.on("message", (data) => {
				console.log("MESSAGE: " + data.messageData.message)
			})
			const sendMessage = () => {
				if (socket.disconnected) {
					alert("Socket is disconnected but ok")
				}
				socket.emit("message", {
					message: document.getElementById("msg").value
				})
			}
		</script>
	</head>
	<body>
		<input type="text" id="msg" placeholder="Enter message..."></input>
		<button onclick="sendMessage()">Send</button>
	</body>
</html>